## è¶…è½½æ­»äº¡

è€ƒè™‘ä¸€ä¸‹JavaScriptä¸­çš„ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°`concat`é‡‡ç”¨ä¸¤ä¸ªæ•°ç»„æˆ–å…ƒç»„ç±»å‹å¹¶å°†å®ƒä»¬è¿æ¥åœ¨ä¸€èµ·ä»¥åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„ã€‚

```ts
function concat(arr1, arr2) {
  return [...arr1, ...arr2];
}
```

è¿˜è¦`tail`ï¼Œå®ƒæ¥å—ä¸€ä¸ªæ•°ç»„æˆ–å…ƒç»„ï¼Œå¹¶è¿”å›é™¤ç¬¬ä¸€ä¸ªå…ƒç´ å¤–çš„æ‰€æœ‰å…ƒç´ ã€‚

```ts
function tail(arg) {
  const [_, ...result] = arg;
  return result;
}
```

å¯¹äº`concat`ï¼Œæˆ‘ä»¬åœ¨è¾ƒæ—§ç‰ˆæœ¬çš„è¯­è¨€ä¸­å”¯ä¸€å¯ä»¥åšçš„å°±æ˜¯å°è¯•ç¼–å†™ä¸€äº›é‡è½½ã€‚

```ts
function concat(arr1: [], arr2: []): [];
function concat<A>(arr1: [A], arr2: []): [A];
function concat<A, B>(arr1: [A, B], arr2: []): [A, B];
function concat<A, B, C>(arr1: [A, B, C], arr2: []): [A, B, C];
function concat<A, B, C, D>(arr1: [A, B, C, D], arr2: []): [A, B, C, D];
function concat<A, B, C, D, E>(arr1: [A, B, C, D, E], arr2: []): [A, B, C, D, E];
function concat<A, B, C, D, E, F>(arr1: [A, B, C, D, E, F], arr2: []): [A, B, C, D, E, F];)
```

å—¯...å¥½å§ï¼Œè¿™æ˜¯ç¬¬äºŒä¸ªæ•°ç»„å§‹ç»ˆä¸ºç©ºæ—¶çš„ä¸ƒä¸ªé‡è½½ã€‚è®©æˆ‘ä»¬æ·»åŠ ä¸€äº›for when`arr2`æœ‰ä¸€ä¸ªå‚æ•°ã€‚

```ts
function concat<A2>(arr1: [], arr2: [A2]): [A2];
function concat<A1, A2>(arr1: [A1], arr2: [A2]): [A1, A2];
function concat<A1, B1, A2>(arr1: [A1, B1], arr2: [A2]): [A1, B1, A2];
function concat<A1, B1, C1, A2>(arr1: [A1, B1, C1], arr2: [A2]): [A1, B1, C1, A2];
function concat<A1, B1, C1, D1, A2>(arr1: [A1, B1, C1, D1], arr2: [A2]): [A1, B1, C1, D1, A2];
function concat<A1, B1, C1, D1, E1, A2>(arr1: [A1, B1, C1, D1, E1], arr2: [A2]): [A1, B1, C1, D1, E1, A2];
function concat<A1, B1, C1, D1, E1, F1, A2>(arr1: [A1, B1, C1, D1, E1, F1], arr2: [A2]): [A1, B1, C1, D1, E1, F1, A2];
```

è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬ç§°å…¶ä¸ºâ€œè¶…è½½æ­»äº¡(è¶…è¿‡ä¸€åƒä¸ªé‡è½½)â€ï¼Œå½“ç„¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ•°ç»„ç±»å‹æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š

```ts
function concat<T, U>(arr1: T[], arr2: U[]): Array<T | U>;
```

ä½†æ˜¯ï¼Œå½“ä½¿ç”¨å…ƒç»„æ—¶ï¼Œè¯¥ç­¾åä¸ä¼šå¯¹è¾“å…¥çš„é•¿åº¦æˆ–å…ƒç´ çš„é¡ºåºè¿›è¡Œä»»ä½•ç¼–ç ã€‚

## å¯å˜å…ƒç»„ç±»å‹

åœ¨ `typescript4.0`  ä¸­å¯ä»¥ä½¿ç”¨ä½¿ç”¨æ³›å‹ `T` ä»£è¡¨å…ƒç»„ç±»å‹å¹¶ä¸”å¯ä»¥ä½¿ç”¨ `...` æ‹“å±•æ“ä½œç¬¦å¯¹å…ƒç»„(æ•°ç»„)ç±»å‹è¿›è¡Œæ“ä½œï¼Œä¸è¿‡æ“ä½œå®Œçš„ç»“æœå¿…é¡»æ”¾å›æ–°çš„å…ƒç»„(å’Œæ•°ç»„æ‹“å±•çš„è§„åˆ™æ˜¯ä¸€æ ·çš„)ï¼Œè¿™æ ·å³ä½¿ä¸çŸ¥é“å…ƒç»„å†…çš„å…·ä½“ç±»å‹æˆ‘ä»¬ä¹Ÿå¯ä»¥å¯¹å…ƒç»„è¿›è¡Œé«˜çº§æ“ä½œï¼š

```ts
type Arr = readonly any[];

function concat<T extends Arr, U extends Arr>(arr1: T, arr2: U): [...T, ...U] {
  return [...arr1, ...arr2];
}
```

> `T` çš„ç±»å‹å…¶å®æ˜¯ä»å‚æ•°ä¸­æ¨æ–­å‡ºæ¥çš„ï¼Œ`extends Arr` åªæ˜¯è¦æ±‚å…¶æ¥å—ä¸€ä¸ªæ•°ç»„ã€‚

### è§„åˆ™

æ­¤å¤– `spread` è¡¨è¾¾å¼æ—¶å¯ä»¥å‡ºç°åœ¨å…ƒç»„çš„ä»»ä½•åœ°æ–¹ï¼š

```ts
type Strings = [string, string];
type Numbers = [number, number];
type StrStrNumNumBool = [...Strings, ...Numbers, boolean];
```

å½“æˆ‘ä»¬æ‰©å±•åˆ°ä¸€ä¸ª`spread`æœªçŸ¥çš„ç±»å‹æ—¶ï¼Œç»“æœç±»å‹ä¹Ÿä¼šå˜æˆæ— ç•Œçš„ï¼Œå¹¶ä¸”ä¸‹é¢çš„æ‰€æœ‰å…ƒç´ éƒ½å°†æˆä¸ºç»“æœrestå…ƒç´ ç±»å‹ã€‚

```ts
type Strings = [string, string];
type Numbers = number[];
type Unbounded = [...Strings, ...Numbers, boolean];
// type Unbounded = [string, string, ...number[], boolean]
```

ç”¨è¿™ä¸¤ä¸ªé«˜ç«¯æ“ä½œæˆ‘ä»¬å°±å¯ä»¥å›å»å®ç° `concat` æ–¹æ³•äº†ï¼š

### æ —å­ğŸŒ°

æ¯”å¦‚è¯´ä¸‹é¢çš„æ–¹æ³•é‡Œé¢æˆ‘ä»¬ç›´æ¥å¯¹ä¼ å…¥çš„å…ƒç»„è¿›è¡Œæ‹†åˆ†å®ç° `tail` æ–¹æ³•ï¼š

```ts
function tail<T extends any[]>(arr: readonly [any, ...T]) {
  const [_ignored, ...rest] = arr;
  return rest;
}

const myTuple = [1, 2, 3, 4] as const;
const r1 = tail(myTuple);
//    ^ = const r1: [2, 3, 4]
```

## æ ‡ç­¾å…ƒç»„ç±»å‹

ä½¿ç”¨å‚æ•°å…ƒç»„è§£æ„æ”¶é›†å‡½æ•°å‚æ•°æ˜¯ä¸€ä¸ªå¾ˆæœ‰è¶£çš„æŠ€å·§ï¼š

```ts
function foo(...args: [string, number]): void {
  // ...
}
```

è¿™æ ·çš„ä¸€ä¸ªå‡½æ•°çš„æ•ˆæœæ˜¯è¿™æ ·çš„;

```ts
function foo(arg0: string, arg1: number): void {
  // ...
}

foo("hello", 42);
foo("hello", 42, true);
// Expected 2 arguments, but got 3.
foo("hello");
// Expected 2 arguments, but got 1.
```

ä½†åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œè¿™æ ·å‡½æ•°å‚æ•°çš„åç§°å°±æ¶ˆå¤±äº†ï¼Œä¸å¯é¿å…çš„å¯è¯»æ€§ä¼šä¸‹é™ã€‚æ¯”å¦‚åœ¨ç¬¬ä¸€ä¸ªç¤ºä¾‹ä¸­ï¼Œç¬¬ä¸€å’Œç¬¬äºŒä¸ªå…ƒç´ æ²¡æœ‰å‚æ•°åï¼š

è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨TypeScript 4.0ä¸­ï¼Œå…ƒç»„ç±»å‹ç°åœ¨å¯ä»¥æä¾›æ ‡ç­¾äº†:

```ts
type Range = [start: number, end: number];
```

### è§„åˆ™

åœ¨ä½¿ç”¨æ ‡è®°å…ƒç»„æ—¶æœ‰ä¸€äº›è§„åˆ™ã€‚é¦–å…ˆï¼Œå½“æ ‡è®°ä¸€ä¸ªå…ƒç»„å…ƒç´ æ—¶ï¼Œè¯¥å…ƒç»„ä¸­çš„æ‰€æœ‰å…¶ä»–å…ƒç´ ä¹Ÿå¿…é¡»è¢«æ ‡è®°ã€‚

```ts
type Bar = [first: string, number];
// Tuple members must all have names or all not have names.
```

ä¸ºäº†åŠ æ·±å‚æ•°åˆ—è¡¨å’Œå…ƒç»„ç±»å‹ä¹‹é—´çš„å…³ç³»ï¼Œrestå…ƒç´ å’Œå¯é€‰å…ƒç´ çš„è¯­æ³•åæ˜ äº†å‚æ•°åˆ—è¡¨çš„è¯­æ³•ã€‚

```ts
type Foo = [first: number, second?: string, ...rest: any[]];
```

åœ¨è§£æ„æ—¶ï¼Œæ ‡ç­¾å¹¶ä¸è¦æ±‚æˆ‘ä»¬å¯¹å˜é‡è¿›è¡Œä¸åŒçš„å‘½åã€‚å®ƒä»¬çº¯ç²¹æ˜¯ä¸ºäº†æ–‡æ¡£å’Œè°ƒè¯•å·¥å…·ã€‚

```ts
function foo(x: [first: string, second: number]) {
    // ...

    // note: we didn't need to name these 'first' and 'second'
    const [a, b] = x;
    a
//  ^ = const a: string
    b
//  ^ = const b: number
}

```

åˆ©ç”¨å›´ç»•å…ƒç»„å’Œå‚æ•°åˆ—è¡¨çš„æ¨¡å¼ä»¥ç±»å‹å®‰å…¨çš„æ–¹å¼å®ç°é‡è½½æ—¶ï¼Œ`label` å…ƒç»„å¾ˆæ–¹ä¾¿ã€‚äº‹å®ä¸Šï¼Œ`TypeScript`çš„ç¼–è¾‘å™¨æ”¯æŒä¼šå°½å¯èƒ½åœ°å°†å®ƒä»¬æ˜¾ç¤ºä¸ºé‡è½½ã€‚

![Signature help displaying a union of labeled tuples as in a parameter list as two signatures](assets/signatureHelpLabeledTuples.gif)


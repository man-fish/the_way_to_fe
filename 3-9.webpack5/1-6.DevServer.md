# DevServer

> åœ¨å¼€å§‹å‰ï¼Œæˆ‘ä»¬å…ˆå°† [`mode` è®¾ç½®ä¸º `'development'`](https://v4.webpack.docschina.org/concepts/mode/#mode-development)ã€‚

`watch` æ¨¡å¼å¯ä»¥ç›‘å¬æ–‡ä»¶å˜åŒ–è‡ªåŠ¨æ‰§è¡Œç¼–è¯‘ï¼Œè€Œ `devSever` èƒ½åœ¨è¿™åŸºç¡€ä¸Šå®ç°è‡ªåŠ¨åˆ·æ–°ã€‚

åˆ·æ–°æˆ‘ä»¬ä¸€èˆ¬åˆ†ä¸ºä¸¤ç§ï¼š

- ä¸€ç§æ˜¯é¡µé¢åˆ·æ–°ï¼Œä¸ä¿ç•™é¡µé¢çŠ¶æ€ï¼Œå°±æ˜¯ç®€å•ç²—æš´ï¼Œç›´æ¥`window.location.reload()`ã€‚
- å¦ä¸€ç§æ˜¯åŸºäº`WDS (Webpack-dev-server)`çš„æ¨¡å—çƒ­æ›¿æ¢ï¼Œåªéœ€è¦å±€éƒ¨åˆ·æ–°é¡µé¢ä¸Šå‘ç”Ÿå˜åŒ–çš„æ¨¡å—ï¼ŒåŒæ—¶å¯ä»¥ä¿ç•™å½“å‰çš„é¡µé¢çŠ¶æ€ï¼Œæ¯”å¦‚å¤é€‰æ¡†çš„é€‰ä¸­çŠ¶æ€ã€è¾“å…¥æ¡†çš„è¾“å…¥ç­‰ã€‚

## webpack-dev-server

`webpack-dev-server` ä¸ºä½ æä¾›äº†ä¸€ä¸ªç®€å•çš„ `web server`ï¼Œå¹¶ä¸”å…·æœ‰ `live reloading`(å®æ—¶é‡æ–°åŠ è½½) åŠŸèƒ½ã€‚è®¾ç½®å¦‚ä¸‹ï¼š

```bash
npm install --save-dev webpack-dev-server
```

ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œè®¾ç½® `dev server`æ ¹ç›®å½•ä½ç½®ï¼š

```diff
  const path = require('path');
  const HtmlWebpackPlugin = require('html-webpack-plugin');
  const CleanWebpackPlugin = require('clean-webpack-plugin');

  module.exports = {
    mode: 'development',
    entry: {
      app: './src/index.js',
      print: './src/print.js'
    },
    devtool: 'inline-source-map',
+   devServer: {
+     contentBase: './dist'
+   },
    plugins: [
      new CleanWebpackPlugin(['dist']),
      new HtmlWebpackPlugin({
        title: 'Development'
      })
    ],
    output: {
      filename: '[name].bundle.js',
      path: path.resolve(__dirname, 'dist')
    }
  };
```

ä»¥ä¸Šé…ç½®å‘ŠçŸ¥ `webpack-dev-server`ï¼Œå°† `dist` ç›®å½•ä¸‹çš„æ–‡ä»¶ serve åˆ° `localhost:8080` ä¸‹ã€‚

> å¦‚æœä¸å¼€å¯ `contentBase`ï¼Œwebpack-dev-server åœ¨ç¼–è¯‘ä¹‹åä¸ä¼šå†™å…¥åˆ°ä»»ä½•è¾“å‡ºæ–‡ä»¶ã€‚è€Œæ˜¯å°† bundle æ–‡ä»¶ä¿ç•™åœ¨å†…å­˜ä¸­ï¼Œç„¶åå°†å®ƒä»¬ serve åˆ° server ä¸­ï¼Œå°±å¥½åƒå®ƒä»¬æ˜¯æŒ‚è½½åœ¨ server æ ¹è·¯å¾„ä¸Šçš„çœŸå®æ–‡ä»¶ä¸€æ ·ã€‚å¦‚æœä½ çš„é¡µé¢å¸Œæœ›åœ¨å…¶ä»–ä¸åŒè·¯å¾„ä¸­æ‰¾åˆ° bundle æ–‡ä»¶ï¼Œåˆ™å¯ä»¥é€šè¿‡ dev server é…ç½®ä¸­çš„ [`publicPath`](https://v4.webpack.docschina.org/configuration/dev-server/#devserver-publicpath-) é€‰é¡¹è¿›è¡Œä¿®æ”¹ã€‚

æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªå¯ä»¥ç›´æ¥è¿è¡Œ dev server çš„ scriptï¼š

**package.json**

```diff
  {
    "name": "development",
    "version": "1.0.0",
    "description": "",
    "main": "webpack.config.js",
    "scripts": {
      "test": "echo \"Error: no test specified\" && exit 1",
      "watch": "webpack --watch",
+     "start": "webpack-dev-server --open",
      "build": "webpack"
    }
  }
```

ç°åœ¨ï¼Œåœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œ `npm start`ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°æµè§ˆå™¨è‡ªåŠ¨åŠ è½½é¡µé¢ã€‚å¦‚æœä½ æ›´æ”¹ä»»ä½•æºæ–‡ä»¶å¹¶ä¿å­˜å®ƒä»¬ï¼Œweb server å°†åœ¨ç¼–è¯‘ä»£ç åè‡ªåŠ¨é‡æ–°åŠ è½½ã€‚è¯•è¯•çœ‹ï¼

### åŸç†

é€šè¿‡ DevServer å¯åŠ¨çš„ Webpack ä¼šå¼€å¯ç›‘å¬æ¨¡å¼ï¼Œå½“å‘ç”Ÿå˜åŒ–æ—¶é‡æ–°æ‰§è¡Œå®Œæ„å»ºåé€šçŸ¥ DevServerã€‚ DevServer ä¼šè®© Webpack åœ¨æ„å»ºå‡ºçš„ JavaScript ä»£ç é‡Œæ³¨å…¥ä¸€ä¸ªä»£ç†å®¢æˆ·ç«¯ç”¨äºæ§åˆ¶ç½‘é¡µï¼Œç½‘é¡µå’Œ DevServer ä¹‹é—´é€šè¿‡ WebSocket åè®®é€šä¿¡ï¼Œ ä»¥æ–¹ä¾¿ DevServer ä¸»åŠ¨å‘å®¢æˆ·ç«¯å‘é€å‘½ä»¤ã€‚ DevServer åœ¨æ”¶åˆ°æ¥è‡ª Webpack çš„æ–‡ä»¶å˜åŒ–é€šçŸ¥æ—¶é€šè¿‡æ³¨å…¥çš„å®¢æˆ·ç«¯æ§åˆ¶ç½‘é¡µåˆ·æ–°ã€‚

## HMR

`Hot Module Replacement`ï¼Œç®€ç§°`HMR`ï¼Œæ— éœ€å®Œå…¨åˆ·æ–°æ•´ä¸ªé¡µé¢çš„åŒæ—¶ï¼Œæ›´æ–°æ¨¡å—ã€‚`HMR`çš„å¥½å¤„ï¼Œåœ¨æ—¥å¸¸å¼€å‘å·¥ä½œä¸­ä½“ä¼šé¢‡æ·±ï¼š**èŠ‚çœå®è´µçš„å¼€å‘æ—¶é—´ã€æå‡å¼€å‘ä½“éªŒ**ã€‚

æ¨¡å—çƒ­æ›¿æ¢ç›¸å¯¹äºé»˜è®¤çš„åˆ·æ–°æœºåˆ¶èƒ½æä¾›æ›´å¿«çš„å“åº”å’Œæ›´å¥½çš„å¼€å‘ä½“éªŒã€‚ æ¨¡å—çƒ­æ›¿æ¢é»˜è®¤æ˜¯å…³é—­çš„ï¼Œè¦å¼€å¯æ¨¡å—çƒ­æ›¿æ¢ï¼Œä½ åªéœ€åœ¨å¯åŠ¨ DevServer æ—¶å¸¦ä¸Š `--hot` å‚æ•°ï¼Œé‡å¯ DevServer åå†å»æ›´æ–°æ–‡ä»¶å°±èƒ½ä½“éªŒåˆ°æ¨¡å—çƒ­æ›¿æ¢çš„ç¥å¥‡äº†ã€‚

```diff
  {
    "name": "development",
    "version": "1.0.0",
    "description": "",
    "main": "webpack.config.js",
    "scripts": {
+     "start": "webpack-dev-server --hot-open",
    }
  }
```

é™¤äº†æ·»åŠ å‚æ•°ä¹‹å¤–æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡æ’ä»¶æˆ–è€… `devServer option` çš„å½¢å¼æ¥å¼€å¯çƒ­æ›´æ›¿ï¼š

```js
const HotModuleReplacementPlugin = require('webpack/lib/HotModuleReplacementPlugin');

module.exports = {
  entry:{
    // ä¸ºæ¯ä¸ªå…¥å£éƒ½æ³¨å…¥ä»£ç†å®¢æˆ·ç«¯
    main:['webpack-dev-server/client?http://localhost:8080/', 'webpack/hot/dev-server','./src/main.js'],
  },
  plugins: [
    // è¯¥æ’ä»¶çš„ä½œç”¨å°±æ˜¯å®ç°æ¨¡å—çƒ­æ›¿æ¢ï¼Œå®é™…ä¸Šå½“å¯åŠ¨æ—¶å¸¦ä¸Š `--hot` å‚æ•°ï¼Œä¼šæ³¨å…¥è¯¥æ’ä»¶ï¼Œç”Ÿæˆ .hot-update.json æ–‡ä»¶ã€‚
    new HotModuleReplacementPlugin(),
  ],
  devServer:{
    // å‘Šè¯‰ DevServer è¦å¼€å¯æ¨¡å—çƒ­æ›¿æ¢æ¨¡å¼
    hot: true,      
  }  
};
```

### åŸç†

`HMR`çš„æ ¸å¿ƒå°±æ˜¯å®¢æˆ·ç«¯ä»æœåŠ¡ç«¯æ‹‰å»æ›´æ–°åçš„æ–‡ä»¶ï¼Œå‡†ç¡®çš„è¯´æ˜¯ `chunk diff (chunk` éœ€è¦æ›´æ–°çš„éƒ¨åˆ†)ï¼Œå®é™…ä¸Š `WDS` ä¸æµè§ˆå™¨ä¹‹é—´ç»´æŠ¤äº†ä¸€ä¸ª `Websocket`ï¼Œå½“æœ¬åœ°èµ„æºå‘ç”Ÿå˜åŒ–æ—¶ï¼Œ`WDS` ä¼šå‘æµè§ˆå™¨æ¨é€æ›´æ–°ï¼Œå¹¶å¸¦ä¸Šæ„å»ºæ—¶çš„ `hash`ï¼Œè®©å®¢æˆ·ç«¯ä¸ä¸Šä¸€æ¬¡èµ„æºè¿›è¡Œå¯¹æ¯”ã€‚

å®¢æˆ·ç«¯å¯¹æ¯”å‡ºå·®å¼‚åä¼šå‘ `WDS` å‘èµ· `Ajax` è¯·æ±‚æ¥è·å–æ›´æ”¹å†…å®¹(æ–‡ä»¶åˆ—è¡¨ã€`hash)`ï¼Œè¿™æ ·å®¢æˆ·ç«¯å°±å¯ä»¥å†å€ŸåŠ©è¿™äº›ä¿¡æ¯ç»§ç»­å‘ `WDS` å‘èµ· `jsonp` è¯·æ±‚è·å–è¯¥`chunk`çš„å¢é‡æ›´æ–°ã€‚

`webpackCompilerï¼ˆwebpackç¼–è¯‘å™¨ï¼‰`ç¼–è¯‘æ–‡ä»¶ä¹‹åï¼Œ`buddule-server`æä¾›ä¸€ä¸ªç›®å½•çš„è®¿é—®ã€‚`hmr-server`åˆ›å»ºä¸€ä¸ª`websocket`ï¼Œä»£ç æ”¹å˜æ—¶ï¼Œæ‰“åŒ…ç¼–è¯‘å™¨é€šçŸ¥`hmr-server`ï¼Œ`hmr-server`å‘é€æ›´æ–°`json`ç»™`hmr-rutime`ï¼Œ`runtime`è¿›è¡Œå®æ—¶æ›´æ–°ã€‚

<img src="assets/image-20210116145032569.png" alt="image-20210116145032569" style="zoom:30%;" />

## devServer é…ç½®

`devServer` æä¾›äº†å¾ˆå¼ºå¤§çš„é…ç½®åŠŸèƒ½ï¼š

#### `devServer.hot`

å¯ç”¨ webpack çš„ [æ¨¡å—çƒ­æ›¿æ¢](https://v4.webpack.docschina.org/concepts/hot-module-replacement/) åŠŸèƒ½ï¼šDevServer é»˜è®¤çš„è¡Œä¸ºæ˜¯åœ¨å‘ç°æºä»£ç è¢«æ›´æ–°åä¼šé€šè¿‡è‡ªåŠ¨åˆ·æ–°æ•´ä¸ªé¡µé¢æ¥åšåˆ°å®æ—¶é¢„è§ˆï¼Œå¼€å¯æ¨¡å—çƒ­æ›¿æ¢åŠŸèƒ½åå°†åœ¨ä¸åˆ·æ–°æ•´ä¸ªé¡µé¢çš„æƒ…å†µä¸‹é€šè¿‡ç”¨æ–°æ¨¡å—æ›¿æ¢è€æ¨¡å—æ¥åšåˆ°å®æ—¶é¢„è§ˆã€‚

**webpack.config.js**

```javascript
module.exports = {
  //...
  devServer: {
    hot: true
  }
};
```

#### `devServer.historyApiFallback`

`devServer.historyApiFallback` ç”¨äºæ–¹ä¾¿çš„å¼€å‘ä½¿ç”¨äº† [HTML5 History API](https://developer.mozilla.org/en-US/docs/Web/API/History) çš„å•é¡µåº”ç”¨ã€‚ è¿™ç±»å•é¡µåº”ç”¨è¦æ±‚æœåŠ¡å™¨åœ¨é’ˆå¯¹ä»»ä½•å‘½ä¸­çš„è·¯ç”±æ—¶éƒ½è¿”å›ä¸€ä¸ªå¯¹åº”çš„ HTML æ–‡ä»¶ï¼Œä¾‹å¦‚åœ¨è®¿é—® `http://localhost/user` å’Œ `http://localhost/home` æ—¶éƒ½è¿”å›åŒä¸€ä¸ª `index.html` æ–‡ä»¶ï¼Œæµè§ˆå™¨ç«¯çš„ `JavaScript` ä»£ç ä¼šä» `URL` é‡Œè§£æå‡ºå½“å‰é¡µé¢çš„çŠ¶æ€ï¼Œæ˜¾ç¤ºå‡ºå¯¹åº”çš„ç•Œé¢ã€‚

å½“ä½¿ç”¨ [HTML5 History API](https://developer.mozilla.org/en-US/docs/Web/API/History) æ—¶ï¼Œä»»æ„çš„ `404` å“åº”éƒ½å¯èƒ½éœ€è¦è¢«æ›¿ä»£ä¸º `index.html`ã€‚`devServer.historyApiFallback` é»˜è®¤ç¦ç”¨ã€‚é€šè¿‡ä¼ å…¥ä»¥ä¸‹å¯ç”¨ï¼š

**webpack.config.js**

```javascript
module.exports = {
  //...
  devServer: {
    historyApiFallback: true
  }
};
```

å¦‚æœä½ çš„åº”ç”¨ç”±å¤šä¸ªå•é¡µåº”ç”¨ç»„æˆï¼Œè¿™å°±éœ€è¦ DevServer æ ¹æ®ä¸åŒçš„è¯·æ±‚æ¥è¿”å›ä¸åŒçš„ HTML æ–‡ä»¶ï¼Œé…ç½®å¦‚ä¸‹ï¼š

```js
historyApiFallback: {
  // ä½¿ç”¨æ­£åˆ™åŒ¹é…å‘½ä¸­è·¯ç”±
  rewrites: [
    // /user å¼€å¤´çš„éƒ½è¿”å› user.html
    { from: /^\/user/, to: '/user.html' },
    { from: /^\/game/, to: '/game.html' },
    // å…¶å®ƒçš„éƒ½è¿”å› index.html
    { from: /./, to: '/index.html' },
  ]
}
```

#### `devServer.contentBase`

`devServer.contentBase` é…ç½® DevServer HTTP æœåŠ¡å™¨çš„æ–‡ä»¶æ ¹ç›®å½•ã€‚ é»˜è®¤æƒ…å†µä¸‹ä¸ºå½“å‰æ‰§è¡Œç›®å½•ï¼Œé€šå¸¸æ˜¯é¡¹ç›®æ ¹ç›®å½•ï¼Œæ‰€æœ‰ä¸€èˆ¬æƒ…å†µä¸‹ä½ ä¸å¿…è®¾ç½®å®ƒï¼Œé™¤éä½ æœ‰é¢å¤–çš„æ–‡ä»¶éœ€è¦è¢« DevServer æœåŠ¡ã€‚ ä¾‹å¦‚ä½ æƒ³æŠŠé¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ `public` ç›®å½•è®¾ç½®æˆ DevServer æœåŠ¡å™¨çš„æ–‡ä»¶æ ¹ç›®å½•ï¼Œä½ å¯ä»¥è¿™æ ·é…ç½®ï¼š

```js
devServer:{
  contentBase: path.join(__dirname, 'public')
}
```

è¿™é‡Œéœ€è¦æŒ‡å‡ºå¯èƒ½ä¼šè®©ä½ ç–‘æƒ‘çš„åœ°æ–¹ï¼ŒDevServer æœåŠ¡å™¨é€šè¿‡ HTTP æœåŠ¡æš´éœ²å‡ºçš„æ–‡ä»¶åˆ†ä¸ºä¸¤ç±»ï¼š

- æš´éœ²æœ¬åœ°æ–‡ä»¶ã€‚
- æš´éœ² Webpack æ„å»ºå‡ºçš„ç»“æœï¼Œç”±äºæ„å»ºå‡ºçš„ç»“æœäº¤ç»™äº† DevServerï¼Œæ‰€ä»¥ä½ åœ¨ä½¿ç”¨äº† DevServer æ—¶åœ¨æœ¬åœ°æ‰¾ä¸åˆ°æ„å»ºå‡ºçš„æ–‡ä»¶ã€‚

`contentBase` åªèƒ½ç”¨æ¥é…ç½®æš´éœ²æœ¬åœ°æ–‡ä»¶çš„è§„åˆ™ï¼Œä½ å¯ä»¥é€šè¿‡ `contentBase:false` æ¥å…³é—­æš´éœ²æœ¬åœ°æ–‡ä»¶ã€‚

#### `devServer.publicPath`

ç”¨äºè®¾ç½®æ‰“åŒ…æ–‡ä»¶åœ¨æµè§ˆå™¨ä¸­çš„è®¿é—®å‰ç¼€ï¼Œå‡è®¾æœåŠ¡å™¨è¿è¡Œåœ¨ `http://localhost:8080` å¹¶ä¸” [`output.filename`](https://v4.webpack.docschina.org/configuration/output/#output-filename) è¢«è®¾ç½®ä¸º `bundle.js`ã€‚é»˜è®¤ `devServer.publicPath` æ˜¯ `'/'`ï¼Œæ‰€ä»¥ä½ çš„åŒ…(bundle)å¯ä»¥é€šè¿‡ `http://localhost:8080/bundle.js` è®¿é—®ã€‚

ä¿®æ”¹ `devServer.publicPath`ï¼Œå°† bundle æ”¾åœ¨æŒ‡å®šç›®å½•ä¸‹ï¼š

**webpack.config.js**

```javascript
module.exports = {
  //...
  devServer: {
    publicPath: '/dist/'
  }
};
```

ç°åœ¨å¯ä»¥é€šè¿‡ `http://localhost:8080/dist/bundle.js` è®¿é—® bundleã€‚

> ç¡®ä¿ `devServer.publicPath` æ€»æ˜¯ä»¥æ–œæ (/)å¼€å¤´å’Œç»“å°¾ã€‚

#### `devServer.port`

æŒ‡å®šè¦ç›‘å¬è¯·æ±‚çš„ç«¯å£å·ï¼š

**webpack.config.js**

```javascript
module.exports = {
  //...
  devServer: {
    port: 8080
  }
};
```

CLI ç”¨æ³•

```bash
webpack-dev-server --port 8080
```

#### `devServer.https`

DevServer é»˜è®¤ä½¿ç”¨ HTTP åè®®æœåŠ¡ï¼Œå®ƒä¹Ÿèƒ½é€šè¿‡ HTTPS åè®®æœåŠ¡ã€‚ æœ‰äº›æƒ…å†µä¸‹ä½ å¿…é¡»ä½¿ç”¨ HTTPSï¼Œä¾‹å¦‚ HTTP2 å’Œ Service Worker å°±å¿…é¡»è¿è¡Œåœ¨ HTTPS ä¹‹ä¸Šã€‚ è¦åˆ‡æ¢æˆ HTTPS æœåŠ¡ï¼Œæœ€ç®€å•çš„æ–¹å¼æ˜¯ï¼š

```js
devServer:{
  https: true
}
```

DevServer ä¼šè‡ªåŠ¨çš„ä¸ºä½ ç”Ÿæˆä¸€ä»½ HTTPS è¯ä¹¦ã€‚

å¦‚æœä½ æƒ³ç”¨è‡ªå·±çš„è¯ä¹¦å¯ä»¥è¿™æ ·é…ç½®ï¼š

```js
devServer:{
  https: {
    key: fs.readFileSync('path/to/server.key'),
    cert: fs.readFileSync('path/to/server.crt'),
    ca: fs.readFileSync('path/to/ca.pem')
  }
}
```

#### `devServer.compress`

`devServer.compress` é…ç½®æ˜¯å¦å¯ç”¨ gzip å‹ç¼©ã€‚`boolean` ä¸ºç±»å‹ï¼Œé»˜è®¤ä¸º `false`ã€‚

#### `devServer.open`

`devServer.open` ç”¨äºåœ¨ DevServer å¯åŠ¨ä¸”ç¬¬ä¸€æ¬¡æ„å»ºå®Œæ—¶è‡ªåŠ¨ç”¨ä½ ç³»ç»Ÿä¸Šé»˜è®¤çš„æµè§ˆå™¨å»æ‰“å¼€è¦å¼€å‘çš„ç½‘é¡µã€‚ åŒæ—¶è¿˜æä¾› `devServer.openPage` é…ç½®é¡¹ç”¨äºæ‰“å¼€æŒ‡å®š URL çš„ç½‘é¡µã€‚

#### `devServer.lazy` ğŸ”‘

å½“å¯ç”¨ `devServer.lazy` æ—¶ï¼Œdev-server åªæœ‰åœ¨è¯·æ±‚æ—¶æ‰ç¼–è¯‘åŒ…(bundle)ã€‚è¿™æ„å‘³ç€ webpack ä¸ä¼šç›‘è§†ä»»ä½•æ–‡ä»¶æ”¹åŠ¨ã€‚æˆ‘ä»¬ç§°ä¹‹ä¸º**æƒ°æ€§æ¨¡å¼**ã€‚

**webpack.config.js**

```javascript
module.exports = {
  //...
  devServer: {
    lazy: true
  }
};
```

#### `devServer.filename` ğŸ”‘

åœ¨ [lazy mode(æƒ°æ€§æ¨¡å¼)](https://v4.webpack.docschina.org/configuration/dev-server/#devserver-lazy-) ä¸­ï¼Œæ­¤é€‰é¡¹å¯å‡å°‘ç¼–è¯‘ã€‚ é»˜è®¤åœ¨ [lazy mode(æƒ°æ€§æ¨¡å¼)](https://v4.webpack.docschina.org/configuration/dev-server/#devserver-lazy-)ï¼Œæ¯ä¸ªè¯·æ±‚ç»“æœéƒ½ä¼šäº§ç”Ÿå…¨æ–°çš„ç¼–è¯‘ã€‚ä½¿ç”¨ `filename`ï¼Œå¯ä»¥åªåœ¨æŸä¸ªæ–‡ä»¶è¢«è¯·æ±‚æ—¶ç¼–è¯‘ã€‚

å¦‚æœ [`output.filename`](https://v4.webpack.docschina.org/configuration/output/#output-filename) è®¾ç½®ä¸º `'bundle.js'` ï¼Œ`devServer.filename` ç”¨æ³•å¦‚ä¸‹ï¼š

**webpack.config.js**

```javascript
module.exports = {
  //...
  output: {
    filename: 'bundle.js'
  },
  devServer: {
    lazy: true,
    filename: 'bundle.js'
  }
};
```

ç°åœ¨åªæœ‰åœ¨è¯·æ±‚ `/bundle.js` æ—¶å€™ï¼Œæ‰ä¼šç¼–è¯‘ bundleã€‚

#### `devServer.headers` ğŸ”‘

åœ¨æ‰€æœ‰å“åº”ä¸­æ·»åŠ é¦–éƒ¨å†…å®¹ï¼š

**webpack.config.js**

```javascript
module.exports = {
  //...
  devServer: {
    headers: {
      'X-Custom-Foo': 'bar'
    }
  }
};
```

#### `devServer.clientLogLevel`

`devServer.clientLogLevel` é…ç½®åœ¨å®¢æˆ·ç«¯çš„æ—¥å¿—ç­‰çº§ï¼Œè¿™ä¼šå½±å“åˆ°ä½ åœ¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·æ§åˆ¶å°é‡Œçœ‹åˆ°çš„æ—¥å¿—å†…å®¹ã€‚ `clientLogLevel` æ˜¯æšä¸¾ç±»å‹ï¼Œå¯å–å¦‚ä¸‹ä¹‹ä¸€çš„å€¼ `none | error | warning | info`ã€‚ é»˜è®¤ä¸º `info` çº§åˆ«ï¼Œå³è¾“å‡ºæ‰€æœ‰ç±»å‹çš„æ—¥å¿—ï¼Œè®¾ç½®æˆ `none` å¯ä»¥ä¸è¾“å‡ºä»»ä½•æ—¥å¿—ã€‚


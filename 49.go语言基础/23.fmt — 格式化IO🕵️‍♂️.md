# fmt â€” æ ¼å¼åŒ–IOğŸ•µï¸â€â™‚ï¸

> fmt åŒ…å®ç°äº†æ ¼å¼åŒ–I/Oå‡½æ•°ï¼Œç±»ä¼¼äºCçš„ printf å’Œ scanf. æ ¼å¼â€œå ä½ç¬¦â€è¡ç”Ÿè‡ªCï¼Œä½†æ¯”Cæ›´ç®€å•ï¼ŒfmtåŒ…ä¸æ˜¯ç”¨æ¥å®ç°æ§åˆ¶å°è¾“å‡ºçš„é‡è¦çš„äº‹æƒ…è¯´100é

##### åˆ†ç±»

> - fmt.P$( )		//å°†æ•°æ®è¾“å‡ºåˆ°æ§åˆ¶å°
> - fmt.Fp$( )	  //å°†æ•°æ®è¾“å‡ºåˆ°**io.Write**æ¥å£çš„å®ç°è€…
> - fmt.Sp$( )	   //å°†æ•°æ®è¾“å‡ºåˆ°string()

##### åº•å±‚åŸç†

`æºç `

```go
type Writer interface {
	Write(p []byte) (n int, err error)
}
```

```go
func Fprint(w io.Writer, a ...interface{}) (n int, err error) {
	p := newPrinter()
	p.doPrint(a)
	n, err = w.Write(p.buf)
	p.free()
	return
}
```

å¯ä»¥çœ‹åˆ°æˆ‘ä»¬è®²æ ¼å¼åŒ–å¥½çš„å­—èŠ‚æ•°ç»„è¾“å…¥åˆ°io.Writerä¸­ï¼Œå†ç”±io.Writerçš„å®ç°è€…æ¥å†™å…¥ï¼Œå¹³æ—¶æˆ‘ä»¬æ¯”è¾ƒå¸¸ç”¨çš„ç”±stdOutä¹Ÿå°±æ˜¯æ§åˆ¶å°çš„å†™å…¥å®ç°è€…ã€‚

`æºç `

```go
func Sprint(a ...interface{}) string {
	p := newPrinter()
	p.doPrint(a)
	s := string(p.buf)
	p.free()
	return s
}
```

å¯ä»¥çœ‹åˆ°è¿™é‡Œæˆ‘ä»¬å°†å‚æ•°ä¼ è¿›å»ä¹‹å**p := newPrinter()ï¼Œp.doPrint(a)**å°†å‚æ•°è½¬æ¢ä½å­—èŠ‚æ•°ç»„ï¼Œæœ€åç”±**string()**æ¥è½¬æ¢æˆstringç±»å‹è¿”å›ã€‚



## fmt.P$ğŸ‘¨â€âœˆï¸

På¼€å¤´çš„ä¸€èˆ¬æŒ‡æ§åˆ¶å°è¾“å‡º

> - fmt.Print( )	//å°†æ•°æ®è¾“å‡ºåˆ°æ§åˆ¶å°
> - fmt.Printf( )   //å°†æ•°æ®æ ¼å¼åŒ–å¹¶ä¸”è¾“å‡ºåˆ°æ§åˆ¶å°ã€‚
> - fmt.Println( ) //å°†æ•°æ®è¾“å‡ºåˆ°æ§åˆ¶å°å¹¶ä¸”æ¢è¡Œã€‚

##### åº•å±‚åŸç†

`æºç `

```go
func Print(a ...interface{}) (n int, err error) {
	return Fprint(os.Stdout, a...)
}
```

å¯ä»¥çœ‹åˆ°Printå‡½æ•°å°†æ•°æ®é€šè¿‡Fprintè½¬æ¢æˆbyteæ•°ç»„è¾“å…¥åˆ°io.Stdoutä¸­ï¼ŒStdoutçš„writeæ–¹æ³•è´Ÿè´£è®²å­—èŠ‚æ•°ç»„æ ‡å‡†å†™å…¥åˆ°æ§åˆ¶å°ä¸­ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬å¹³æ—¶ä½¿ç”¨çš„æ§åˆ¶å°è¾“å‡ºçš„åŸºæœ¬å®ç°åŸç†ã€‚

### fmt.Printfæ ¼å¼åŒ–è¾“å‡ºğŸ§”

##### å ä½ç¬¦

```go
func main(){
	fmt.Printf("%%")
	fmt.Println()
	fmt.Println("å•çº¯çš„è¾“å‡ºç™¾åˆ†å·")

	fmt.Printf("%t",true)
	fmt.Println()
	fmt.Println("å•çº¯çš„è¾“å‡ºçœŸå‡å€¼ï¼ˆtrue/falseï¼‰")

	fmt.Printf("%v","string")
	fmt.Println()
	fmt.Println("åŸæ ¼å¼è¾“å‡º")
	fmt.Printf("%T","string")
	fmt.Println()
	fmt.Println("æ‰“å°æ•°æ®ç±»å‹")

	fmt.Printf("%d",12)
	fmt.Println()
	fmt.Println("åè¿›åˆ¶æ–¹æ³•è¡¨ç¤ºï¼Œåªèƒ½ä¼ é€’int")
	fmt.Printf("%b",12)
	fmt.Println()
	fmt.Println("äºŒè¿›åˆ¶æ–¹æ³•è¡¨ç¤ºï¼Œåªèƒ½ä¼ é€’int")

	fmt.Printf("%q","string")
	fmt.Println()
	fmt.Println("åŒå¼•å·å›´ç»•çš„å­—ç¬¦ä¸²ï¼Œç”±Goè¯­æ³•å®‰å…¨åœ°è½¬ä¹‰")

	fmt.Printf("%s", []byte("Goè¯­è¨€ä¸­æ–‡ç½‘"))
	fmt.Println()
	fmt.Println("è¾“å‡ºå­—ç¬¦ä¸²è¡¨ç¤ºï¼ˆstringç±»å‹æˆ–[]byte)")

	fmt.Printf("%c", 0x4E2D)
	fmt.Println()
	fmt.Println("ç›¸åº”Unicodeç ç‚¹æ‰€è¡¨ç¤ºçš„å­—ç¬¦")
}
```

##### æ ¼å¼åŒ–é”™è¯¯

å¦‚æœç»™å ä½ç¬¦æä¾›äº†æ— æ•ˆçš„å®å‚ï¼ˆä¾‹å¦‚å°†ä¸€ä¸ªå­—ç¬¦ä¸²æä¾›ç»™ %dï¼‰ï¼Œæ‰€ç”Ÿæˆçš„å­—ç¬¦ä¸²ä¼šåŒ…å«è¯¥é—®é¢˜çš„æè¿°ï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š

```bash
    ç±»å‹é”™è¯¯æˆ–å ä½ç¬¦æœªçŸ¥ï¼š%!verb(type=value)
        Printf("%d", hi):          %!d(string=hi)
    å®å‚å¤ªå¤šï¼š%!(EXTRA type=value)
        Printf("hi", "guys"):      hi%!(EXTRA string=guys)
    å®å‚å¤ªå°‘ï¼š %!verb(MISSING)
        Printf("hi%d"):            hi %!d(MISSING)
    å®½åº¦æˆ–ç²¾åº¦ä¸æ˜¯intç±»å‹: %!(BADWIDTH) æˆ– %!(BADPREC)
        Printf("%*s", 4.5, "hi"):  %!(BADWIDTH)hi
        Printf("%.*s", 4.5, "hi"): %!(BADPREC)hi
    æ‰€æœ‰é”™è¯¯éƒ½å§‹äºâ€œ%!â€ï¼Œæœ‰æ—¶ç´§è·Ÿç€å•ä¸ªå­—ç¬¦ï¼ˆå ä½ç¬¦ï¼‰ï¼Œå¹¶ä»¥å°æ‹¬å·æ‹¬ä½çš„æè¿°ç»“å°¾ã€‚
```



## fmt.Sp$ğŸ‘¨â€ğŸ¨

Spå¼€å¤´çš„ä¸€èˆ¬æŒ‡æ§åˆ¶å°è¾“å‡º

> - fmt.Sprint( )	//å°†æ•°æ®è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ã€‚
> - fmt.Sprintf( )   //å°†æ•°æ®æ ¼å¼åŒ–å¹¶ä¸”è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ã€‚
> - fmt.Sprintln( ) //å°†æ•°æ®è½¬åŒ–ä¸ºå­—ç¬¦ä¸²å¹¶ä¸”æ·»åŠ æ¢è¡Œã€‚

```go
package main

import "fmt"

type lion struct {
	age int
	name string
}

func (l lion) String() string {
	return fmt.Sprint("ç‹®å­åå«",l.name,"ï¼Œä»Šå¹´",l.age,"å²äº†ã€‚")
}

func main(){
    xb := lion{name:"xinba",age:7}
	fmt.Print(xb)
	fmt.Printf("%T",fmt.Sprint("ç‹®å­åå«","ï¼Œä»Šå¹´","å²äº†ã€‚"))
}
```

```go
ç‹®å­åå«xinbaï¼Œä»Šå¹´7å²äº†ã€‚
string
```



## fmt.Fp$ğŸ‘©â€ğŸ«

Spå¼€å¤´çš„ä¸€èˆ¬æŒ‡æ§åˆ¶å°è¾“å‡º

> - fmt.Fprint( )	//å°†æ•°æ®è¾“å‡ºåˆ°wtiteræ¥å£çš„å®ç°è€…ã€‚
> - fmt.Fprintf( )   //å°†æ•°æ®æ ¼å¼åŒ–å¹¶ä¸”è¾“å‡ºåˆ°wtiteræ¥å£çš„å®ç°è€…ã€‚
> - fmt.Fprintln( ) //å°†æ•°æ®è¾“å‡ºåˆ°wtiteræ¥å£çš„å®ç°è€…å¹¶ä¸”æ·»åŠ æ¢è¡Œã€‚

`æºç `

```go
type Writer interface {
	Write(p []byte) (n int, err error)
}
```

```go
func Fprint(w io.Writer, a ...interface{}) (n int, err error) {
	p := newPrinter()
	p.doPrint(a)
	n, err = w.Write(p.buf)
	p.free()
	return
}
```

å¯ä»¥çœ‹åˆ°æˆ‘ä»¬è®²æ ¼å¼åŒ–å¥½çš„å­—èŠ‚æ•°ç»„è¾“å…¥åˆ°io.Writerä¸­ï¼Œå†ç”±io.Writerçš„å®ç°è€…æ¥å†™å…¥ï¼Œå¹³æ—¶æˆ‘ä»¬æ¯”è¾ƒå¸¸ç”¨çš„ç”±stdOutä¹Ÿå°±æ˜¯æ§åˆ¶å°çš„å†™å…¥å®ç°è€…ã€‚



## Stringer æ¥å£

Stringeræ¥å£çš„å®šä¹‰å¦‚ä¸‹ï¼š

```go
    type Stringer interface {
        String() string
    }
```

æ ¹æ® Go è¯­è¨€ä¸­å®ç°æ¥å£çš„å®šä¹‰ï¼Œä¸€ä¸ªç±»å‹åªè¦æœ‰ `String() string` æ–¹æ³•ï¼Œæˆ‘ä»¬å°±è¯´å®ƒå®ç°äº† Stringer æ¥å£ã€‚è€Œåœ¨æœ¬èŠ‚å¼€å§‹å·²ç»è¯´åˆ°ï¼Œå¦‚æœæ ¼å¼åŒ–è¾“å‡ºæŸç§ç±»å‹çš„å€¼ï¼Œåªè¦å®ƒå®ç°äº† String() æ–¹æ³•ï¼Œé‚£ä¹ˆä¼šè°ƒç”¨ String() æ–¹æ³•è¿›è¡Œå¤„ç†ã€‚

```go
type lion struct {
	age int
	name string
}

func (l lion) String() string {
	return fmt.Sprint("ç‹®å­åå«",l.name,"ï¼Œä»Šå¹´",l.age,"å²äº†ã€‚")
}

func main(){
    xb := lion{name:"ç‹®å­ç‹",age:2}
	fmt.Print(xb)
	fmt.Printf("%T",fmt.Sprint("ç‹®å­åå«","ï¼Œä»Šå¹´","å²äº†ã€‚"))
}
```

```go
ç‹®å­åå«xinbaï¼Œä»Šå¹´7å²äº†ã€‚
string
```


# æµ…è°ˆGOçš„å­—ç¬¦ç±»å‹ğŸ¥§

### å‰è¨€ğŸ¥™

> è§†ä½œå¸¸è¯†æˆ‘ä»¬çŸ¥é“è®¡ç®—æœºè¡¨ç¤ºå­—ç¬¦çš„æ–¹å¼æ—¶unicodeç¼–ç ï¼Œæ˜¯ä¸€ä¸ªè¶…å¤§çš„å­—ç¬¦é›†ï¼Œçº¯é€’å¢å¯¹åº”å…³ç³»ï¼Œä½†æ˜¯æ²¡æ³•å‚¨å­˜ï¼Œè¡¨ç¤ºå•ä¸€å­—ç¬¦éœ€è¦çš„å®¹é‡è¿‡å¤§ï¼Œè€Œutf-8å°±æ˜¯ä¸€ç§èƒ½å®ç°å‚¨å­˜unicodeçš„ç¼–ç æ–¹å¼ï¼Œåœ¨utf-8ä¸­ä¸€ä¸ªä¸­æ–‡å­—ç¬¦å ä¸¤åˆ°ä¸‰ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºä¸€ä¸ªunicodeç¼–ç ï¼Œè€Œè‹±æ–‡åˆ™å ä¸€ä¸ªå­—èŠ‚ã€‚



### stringç±»å‹é‡Œå­˜çš„æ˜¯ä»€ä¹ˆï¼ŸğŸ®

> stringé‡Œé¢å…¶å®å­˜çš„æ˜¯ä½ è¾“å…¥å­—ç¬¦ä¸²çš„unicodeè¡¨ç¤ºç ï¼ˆutf-8/gb...ï¼‰ã€‚



### è·å–stringä¸­çš„ä¸€ä¸ªå­—ç¬¦ğŸ’¼

```go
string([]rune(string)[i])
```



### å­—ç¬¦å‹å’Œintå‹ç›¸åŠ å‡ğŸ

æˆ‘ä»¬çŸ¥é“goè¯­è¨€çš„å­—ç¬¦å‹é‡Œé¢å…¶å®æ˜¯ä¸€ä¸ª `int32`

```go
type rune = int32
```

æ‰€ä»¥è¯´å­—ç¬¦å‹å¯ä»¥å’Œintå‹ç›¸åŠ ã€‚

```go
string('A'+idx)
```



### rangeéå†é—®é¢˜ï¼ŸğŸ¥ 

ç©¶å…¶åŸå› è¿˜æ˜¯è¦è¯´åˆ°rangeéå†è¿˜æœ‰len()çš„è¿”å›å€¼ï¼Œgoè¯­è¨€ä¸­rangeéå†æˆ–è€…æ˜¯len()**ï¼ˆlen(string)è¿”å›çš„æ˜¯å­—èŠ‚æ•°ï¼‰**å¸¸è§„éå†ï¼Œéå†çš„éƒ½æ˜¯å­—èŠ‚ï¼Œè¿™å°±ä¼šå‡ºç°ä¸€ä¸ªå¾ˆä¸¥é‡çš„é—®é¢˜ï¼Œéå†æ—¶æ²¡æ³•æ‰“å°æˆ‘ä»¬æƒ³è¦çš„ä¸­æ–‡å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦ã€‚

##### rangeéå†stringé—®é¢˜

é¦–å…ˆï¼šrangeçš„ä½¿ç”¨éå¸¸ç®€å•ï¼Œå¯¹äºéå†arrayï¼Œ*arrayï¼Œstringå®ƒè¿”å›ä¸¤ä¸ªå€¼åˆ†åˆ«æ˜¯æ•°æ®çš„ç´¢å¼•å’Œå€¼ï¼Œéå†mapæ—¶è¿”å›çš„ä¸¤ä¸ªå€¼åˆ†åˆ«æ˜¯keyå’Œvalueï¼Œéå†channelæ—¶ï¼Œåˆ™åªæœ‰ä¸€ä¸ªè¿”å›æ•°æ®ã€‚å„ç§ç±»å‹çš„è¿”å›å€¼å‚è€ƒä¸‹è¡¨ï¼š

![1574751815522](F:\æˆ‘çš„ç¬”è®°\image\1574751815522.png)

ç›´æ¥rangeéå†å­—ç¬¦ä¸²ï¼Œè¿™æ ·è¾“å‡ºæˆ‘ä»¬éå†çš„è¿˜æ˜¯å­—èŠ‚ï¼Œå¯¹äºå­—ç¬¦ä¸²æ¥è¯´ä¹Ÿå°±æ˜¯ä»–çš„utf-8ç¼–ç ï¼ˆä¹Ÿå¯èƒ½æ˜¯åˆ«çš„unicodeè¡¨ç¤ºç ï¼‰ï¼Œè€Œå› ä¸ºä½ éå†çš„æ˜¯å­—ç¬¦ä¸²å¯¹ç…§ä¸Šè¡¨ï¼Œrangeçš„è¿”å›å€¼æ˜¯runeï¼Œä½†æ˜¯ä½ éå†çš„æ˜¯å­—èŠ‚å‘€ï¼Œæ‰€ä»¥ç¨‹åºä¼šè‡ªåŠ¨å°†å­—èŠ‚ç»„æˆunicodeç¼–ç ï¼Œç„¶åè¾“å‡ºä¸€ä¸ªruneï¼ˆç”¨intè¡¨ç¤ºï¼‰ã€‚

```go
package main

import (
	"fmt"
)

func main() {
	var str string = "chen"
	for i, b := range str {
		fmt.Printf("(%d %X)", i, b)
				fmt.Println(b)
	}
}

(0 63)99
(1 68)104
(2 65)101
(3 6E)110
(4 827E)33406
(7 8389)33673
```



##### rangeéå†btye[]

> å°†stringç±»å‹å¼ºåˆ¶è½¬æ¢ä½byteæ•°ç»„ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬ä¼šå°†å­—ç¬¦ä¸²é‡Œé¢æ‘çš„utf-8è¡¨ç¤ºç æ‹†æˆbyteæ•°ç»„ã€‚

```go
package main

import (
	"fmt"
)

func main() {
	for i, b := range []byte(str) {
		fmt.Printf("(%d %X)", i, b)
		fmt.Println(b)
		//utf-8ç¼–ç 
	}
	fmt.Println("éå†utf-8ç¼–ç ")
}

(0 63)99
(1 68)104
(2 65)101
(3 6E)110
(4 E8)232
(5 89)137
(6 BE)190
(7 E8)232
(8 8E)142
(9 89)137
```



### æ€ä¹ˆè§£å†³ğŸ°

åªè¦æˆ‘ä»¬è§£å†³äº†rangeéå†çš„è¿”å›å€¼æˆ–è€…len()çš„è¿”å›å€¼ï¼Œé‚£ä¹ˆè¿™ä¸ªè¿™ä¸ªé—®é¢˜ä¸ä¹…è¿åˆƒè€Œè§£äº†ä¹ˆï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦æŠŠstringå¼ºåˆ¶ç±»å‹è½¬æ¢æˆruneæ•°ç»„å°±å¯ä»¥å•¦ã€‚

```go
package main

import (
	"fmt"
)

func main() {
	for i, ch := range []rune(s) {
		fmt.Printf("(%d %c) ", i, ch)
	}
}
```


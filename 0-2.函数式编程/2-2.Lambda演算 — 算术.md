# Lambdaæ¼”ç®—çš„ç®—æœ¯

ç¬¬ä¸€ç« æˆ‘ä»¬è¯´äº†ï¼Œåœ¨**çº¯ç²¹**çš„ `lambda`æ¼”ç®—é‡Œé¢ï¼Œæ²¡æœ‰æ‰€è°“çš„æ•°å­—å’Œæ•°å­¦è¿ç®—ç¬¦(æ²¡æœ‰æ•°å­—è‡ªç„¶æ²¡æœ‰è¿ç®—ç¬¦)ï¼Œå¦‚æžœæˆ‘ä»¬éœ€è¦ä»–ä»¬åªèƒ½ç”±æˆ‘ä»¬è‡ªå·±åŽ»å®žçŽ°ã€‚

æ‰€ä»¥ï¼ŒçŽ°åœ¨ï¼Œè®©æˆ‘ä»¬ç”¨`lambda`æ¼”ç®—å¹²ç‚¹æœ‰è¶£çš„äº‹ã€‚é¦–å…ˆï¼Œä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œæˆ‘å°†ä»‹ç»äº›è¯­æ³•ç³–ï¼ˆ`syntactic sugar`ï¼‰æ¥å‘½åå‡½æ•°ï¼Œä»¥ä¾¿ä¸‹é¢é‡åˆ°æŸäº›å¤æ‚çš„äº‹æƒ…çš„æ—¶å€™æ–¹ä¾¿æˆ‘ä»¬é˜…è¯»ã€‚

å¼•è¿›ã€Œå…¨å±€ã€å‡½æ•°ï¼ˆå³åœ¨æˆ‘å†™çš„è¿™äº›æ‰€æœ‰çš„å…³äºŽ`lambda`æ¼”ç®—çš„ä»‹ç»é‡Œéƒ½å¯ä»¥ç›´æŽ¥ä½¿ç”¨ï¼Œè€Œä¸ç”¨åœ¨æ¯ä¸€ä¸ªè¡¨è¾¾å¼ä¸­éƒ½å£°æ˜Žä¸€æ¬¡è¿™ä¸ªå‡½æ•°çš„åŠžæ³•ï¼‰ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨â€œ`let`â€è¡¨è¾¾å¼ï¼š

```lisp
let square = Î»x.x^2 
```

è¿™æ¡è¡¨è¾¾å¼å£°æ˜Žäº†ä¸€ä¸ªåä¸º `square` çš„å‡½æ•°ï¼Œå…¶å®šä¹‰æ˜¯`Î»x.x^2 `ã€‚å¦‚æžœæˆ‘ä»¬æœ‰â€œ `square 4`â€ï¼Œåˆ™ä¸Šé¢çš„â€œletâ€è¡¨è¾¾å¼çš„ç­‰æ•ˆè¡¨è¾¾å¼ä¸ºï¼š

```lisp
(Î»square.square 4) (Î»x.x^2) 
```

## é˜¿éš†ä½.é‚±å¥‡çš„å¤©æ‰ä¹‹ä½œ â€” é‚±å¥‡æ•°

æŸäº›ä¾‹å­ä¸­ï¼Œæˆ‘ä½¿ç”¨äº†æ•°å­—å’Œç®—æœ¯è¿ç®—ã€‚ä½†æ•°å­—å¹¶ä¸çœŸæ­£å­˜åœ¨äºŽ`lambda`æ¼”ç®—ä¸­ï¼Œæˆ‘ä»¬æœ‰çš„åªæœ‰å‡½æ•°ï¼å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦å‘æ˜ŽæŸç§ä½¿ç”¨å‡½æ•°æ¥åˆ›å»ºæ•°å­—çš„æ–¹å¼ã€‚å¹¸è¿çš„æ˜¯ï¼Œé‚±å¥‡ï¼ˆ`Alonzo Church`ï¼‰ï¼Œè¿™ä¸ªå‘æ˜Žäº†`lambda`æ¼”ç®—çš„å¤©æ‰ï¼Œæ‰¾å‡ºäº†åšåˆ°è¿™ä¸€ç‚¹çš„åŠžæ³•ã€‚ä»–çš„å‡½æ•°åŒ–çš„æ•°å­—çš„ç‰ˆæœ¬è¢«ç§°ä¸ºé‚±å¥‡æ•°ï¼ˆ`Church Numerals`ï¼‰ã€‚

æ‰€æœ‰çš„ä¸˜å¥‡æ•°éƒ½æ˜¯å¸¦æœ‰ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°ï¼š

+ `0`æ˜¯ `Î»s z.z `ï¼›
+ `1`æ˜¯ `Î»s z.s z` ï¼›
+ `2`æ˜¯ `Î»s z.s (s z)`ï¼›
+ å¯¹äºŽä»»ä½•æ•°`n`ï¼Œå®ƒçš„é‚±å¥‡æ•°æ˜¯å°†å…¶ç¬¬ä¸€ä¸ªå‚æ•°(å‡½æ•°)åº”ç”¨åˆ°ç¬¬äºŒä¸ªå‚æ•°ä¸Š`n`æ¬¡çš„å‡½æ•°ã€‚

ä¸€ä¸ªå¾ˆå¥½çš„ç†è§£åŠžæ³•æ˜¯å°†â€œ`z`â€ä½œä¸ºæ˜¯å¯¹äºŽé›¶å€¼çš„å‘½åï¼Œè€Œâ€œ`s`â€ä½œä¸ºåŽç»§å‡½æ•°çš„åç§°ã€‚

å› æ­¤ï¼Œ`0` æ˜¯ä¸€ä¸ªä»…è¿”å›ž `0` å€¼çš„å‡½æ•°ï¼›`1` æ˜¯å°†åŽç»§å‡½æ•°åº”ç”¨åˆ° `0` ä¸Š **ä¸€æ¬¡çš„å‡½æ•°**ï¼›`2` åˆ™æ˜¯å°†åŽç»§å‡½æ•°åº”ç”¨åˆ°`1`ä¸Šä¸€æ¬¡çš„å‡½æ•°ï¼Œä»¥æ­¤ç±»æŽ¨ã€‚

### ç±»æ¯”

æœ‰äº†ç†è®ºçš„æŒ‡å¯¼ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å°±èƒ½å†™å‡ºä¸‹é¢çš„ä»£ç ï¼š

```ts
const ZERO = f => x => x;
const ONE = f => x => f(x);
const TWO = f => x => f(f(x));
```

æœ‰äº†æ•°å­—åŽï¼Œç„¶åŽè¿˜éœ€è¦å†å®šä¹‰ä¸€ä¸ªè½¬æ¢å‡½æ•°ï¼Œå®ƒå¯ä»¥å°†`ZERO`å’Œ`ONE`è¿™ç§å‡½æ•°å¼å®šä¹‰è½¬æˆæˆ‘ä»¬æ‰€ç†Ÿæ‚‰çš„æ•°å­—ï¼Œæ–¹ä¾¿è°ƒè¯•ã€‚

```ts
const toNumber = n => n(i => i+1)(0);
console.log(toNumber(ONE));
// 1
```

## åŠ æ³•

é¦–å…ˆæˆ‘ä»¬è¦å®žçŽ°çš„æ˜¯å››åˆ™è¿ç®—ä¸­çš„åŠ æ³•ï¼šè¦åšåŠ æ³•ï¼Œ`x + y`ï¼Œæˆ‘ä»¬éœ€è¦å†™ä¸€ä¸ªæœ‰å››ä¸ªå‚æ•°çš„å‡½æ•°ï¼›ä¸¤ä¸ªéœ€è¦ç›¸åŠ çš„æ•°å­—ï¼›ä»¥åŠæŽ¨å¯¼æ•°å­—æ—¶ç”¨åˆ°çš„â€œ`s`â€å’Œâ€œ`z`â€ï¼š

```lisp
let add = Î»s z x y.x s (y s z) 
```

è®©æˆ‘ä»¬å°†å…¶æŸ¯é‡ŒåŒ–ï¼Œçœ‹çœ‹æ˜¯æ€Žä¹ˆå›žäº‹ã€‚é¦–å…ˆï¼Œå®ƒæŽ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œè¿™æ˜¯æˆ‘ä»¬éœ€è¦åšåŠ æ³•çš„ä¸¤ä¸ªå€¼ï¼›ç¬¬äºŒï¼Œå®ƒéœ€è¦æ­£åˆ™åŒ–ï¼ˆ`normalize`ï¼‰è¿™ä¸¤ä¸ªå‚æ•°ï¼Œä»¥ä½¿å®ƒä»¬éƒ½ä½¿ç”¨å¯¹0ï¼ˆ`z`ï¼‰å’ŒåŽç»§å€¼ï¼ˆ`s`ï¼‰çš„ç»‘å®šï¼ˆå³ï¼Œå°†å‚æ•°éƒ½å†™æˆ`s`å’Œ`z`çš„ç»„åˆçš„å½¢å¼ï¼‰ã€‚

```lisp
let add = Î»x y.(Î»s z.(x s (y s z))) 
```

çœ‹ä¸‹è¿™ä¸ªå¼å­ï¼Œå®ƒè¯´çš„æ˜¯ï¼Œä¸ºäº†å°†`x`å’Œ`y`ç›¸åŠ ï¼Œå…ˆç”¨å‚æ•°â€œ`s`â€å’Œâ€œ`z`â€åˆ›å»ºï¼ˆæ­£åˆ™åŒ–çš„ï¼‰ä¸˜å¥‡æ•°â€œ`y`â€ã€‚ç„¶åŽåº”ç”¨`x`åˆ°ä¸˜å¥‡æ•°`y`ä¸Šï¼Œè¿™æ—¶å€™ä½¿ç”¨ç”±â€œ`s`â€å’Œâ€œ`z`â€å®šä¹‰çš„ä¸˜å¥‡æ•°`y`ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¾—åˆ°çš„ç»“æžœæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æŠŠè‡ªå·±åŠ åˆ°å¦ä¸€ä¸ªæ•°å­—ä¸Šã€‚ï¼ˆè¦è®¡ç®—`x + y`ï¼Œå…ˆè®¡ç®— `y` æ˜¯ `z` çš„å‡ å·åŽç»§ï¼Œç„¶åŽè®¡ç®—`x` æ˜¯ `y`çš„å‡ å·åŽç»§ã€‚ï¼‰

### æ —å­ðŸŒ°

è®©æˆ‘ä»¬å†è¿›ä¸€æ­¥çœ‹çœ‹`1 + 2`çš„è¿ç®—è¿‡ç¨‹ï¼š

```ts
// å…ˆæ¥å®šä¹‰ 1 å’Œ 2 
let ONE = Î»f1 x1.f1 x1;
let TWO = Î»f2 x2.f2 (f2 x2);
add ONE TWO s z;
```

å°† `add` å‡½æ•°å±•å¼€æ¥ï¼Œå¹¶ä¸”å¯¹ `s` å’Œ `z` åš `Beta` è§„çº¦ï¼š

```ts
(Î»x y.(Î»s z.(x s (y s z)))) TWO ONE
```

å¯¹å·²èŽ·å¾—çš„è¡¨è¾¾å¼åš `Beta` è§„çº¦ï¼š

```ts
Î»s z.((Î»f2 x2.f2 (f2 x2)) s ((Î»f1 x1.f1 x1)  s z))
```

ä¹‹åŽç»§ç»­ `Beta` è§„çº¦æ•°å­— `1` ï¼š

```ts
Î»s z.((Î»f2 x2.f2 (f2 x2)) s (s z))
```

ç„¶åŽbetaè§„çº¦ä¸˜å¥‡æ•°`2`ã€‚è¿™æ­¥æ“ä½œå…¶å®žæ˜¯â€œæ­£åˆ™åŒ–â€`2`ï¼šæŠŠæ•°å­—`2`çš„å®šä¹‰é‡Œçš„åŽç»§å‡½æ•°å’Œé›¶å‡½æ•°æ›¿æ¢æˆ`add`çš„å‚æ•°åˆ—è¡¨é‡Œçš„åŽç»§å‡½æ•°å’Œé›¶å‡½æ•°ï¼š

```ts
Î»s z.(s (s (s z)))
```

äºŽæ˜¯ï¼Œæˆ‘ä»¬çš„ç»“æžœæ˜¯ï¼šä¸˜å¥‡æ•°`3`ï¼

### ç±»æ¯”

å°†è¿™æ®µ `lambda` è¡¨è¾¾å¼å†™æˆä»£ç ä¹Ÿå¾ˆç®€å•ï¼Œæƒ³æƒ³ä¸€ä¸‹ä¸¤ä¸ªé‚±å¥‡æ•°ï¼Œå°†ç¬¬äºŒæ•°åº”ç”¨äºŽç¬¬ä¸€ä¸ªæ•°å°±å¯ä»¥èŽ·å¾—ç´¯åŠ çš„æ‰§è¡Œæ¬¡æ•°ï¼š

```ts
let add = (x) => (y) => (_f) => (_x) => x(_f)(y(_f)(_x));
```

## ä¹˜æ³•

å†æŽ¥ä¸‹æ¥æˆ‘ä»¬æ¥è¯•ç€å®žçŽ°ä¹˜æ³•ï¼Œä¹˜æ³•ç…§æ¯”åŠ æ³•ä¹Ÿç›¸å¯¹ç®€å•ï¼ŒåŒæ ·æ˜¯ä¸€ä¸ªå››ä¸ªå‚æ•°çš„å‡½æ•°ï¼šä¸¤ä¸ªéœ€è¦ç›¸ä¹˜çš„æ•°å­—ï¼›ä»¥åŠæŽ¨å¯¼æ•°å­—æ—¶ç”¨åˆ°çš„â€œ`s`â€å’Œâ€œ`z`â€ï¼Œæˆ‘ä»¬åªæ˜¯è°ƒæ¢äº†å‚æ•°çš„ä½ç½®å°±è½»æ¾å®žçŽ°äº†è¿™ä¸ªåŠŸèƒ½ï¼š

```ts
let mult = Î»x y s z.x (y s) z
```

åŒæ ·è®©æˆ‘ä»¬çœ‹çœ‹ç§‘é‡ŒåŒ–çš„è¡¨ç¤ºï¼š

```tsx
let mult = Î»x.Î»y.Î»s.Î»z.x (y s) z
```

### æ —å­ðŸŒ°

è®©æˆ‘ä»¬å†è¿›ä¸€æ­¥çœ‹çœ‹`2 * 2`çš„è¿ç®—è¿‡ç¨‹ï¼š

```ts
// å…ˆæ¥å®šä¹‰ 1 å’Œ 2 
let TWO = Î»f2.Î»x2.f2 (f2 x2);
mult TWO TWO s z;
```

å°† `mult` å‡½æ•°å±•å¼€æ¥ï¼Œå¹¶ä¸”å¯¹ `s` å’Œ `z` åš `Beta` è§„çº¦ï¼š

```ts
(Î»x.Î»y.Î»s.Î»z.x (y s) z) TWO TWO
```

`TWO` å’Œ `TWO`å¯¹å·²èŽ·å¾—çš„è¡¨è¾¾å¼åš `Beta` è§„çº¦ï¼š

```ts
Î»s.Î»z.(Î»f2.Î»x2.f2 (f2 x2)) ((Î»f2.Î»x2.f2 (f2 x2)) s) z
```

å…ˆä½¿ç”¨ç¬¬ä¸€ä¸ª `s` å¯¹åŽä¸€ä¸ª `TWO` è¿›è¡Œè§„çº¦ï¼š

```ts
Î»s.Î»z.(Î»f2.Î»x2.f2 (f2 x2)) (Î»x2.s (s x2)) z
```

ç„¶åŽä½¿ç”¨å¤„ç†å®Œçš„åŽä¸€ä¸ª `TWO` å’Œ `z` å¯¹ ç¬¬ä¸€ä¸ª `TWO` è¿›è¡Œè§„çº¦ï¼š

```ts
Î»s.Î»z.(Î»x2.s (s x2)) ((Î»x2.s (s x2)) z)
Î»s.Î»z.(Î»x2.s (s x2)) (s (s z))
```

æœ€åŽæˆ‘ä»¬çš„ç»“æžœæ˜¯ï¼šä¸˜å¥‡æ•°`4`ï¼

```ts
Î»s.Î»z.(s (s (s (s z))))
```

### ç±»æ¯”

è·Ÿä¸Šé¢åŒæ ·çš„é“ç†åªè¦è®©ä»»æ„ä¸€ä¸ªæ•°çš„ `f` æ›¿æ¢æˆå¦ä¸€ä¸ªæ•°çš„ `n(f)` å³å¯èŽ·å¾—ä¹˜ç§¯çš„æ•ˆæžœï¼š

```ts
let mult = (x) => (y) => (_f) => (_x) => x(y(_f))(_x);
```

